import{d as O,al as v,r as f,g as c,ah as u,i as e,e as t,a as y,w as _,ak as R,am as w,h as m,an as T,ao as A,ap as C,aq as x,T as E,ar as M,as as P,ai as q,aj as D,at as H}from"./vendor.bf9130db.js";import{_ as U,u as G,w as I,o as J,c as K,n as Q}from"./index.99fe7b97.js";const X=n=>n?n.length<12?n:`${n.slice(0,6)}...${n.slice(-4)}`:null,k=n=>(q("data-v-498f104e"),n=n(),D(),n),Y={id:"wallet"},Z={class:"connected"},ee=["src"],ae=["src"],te={id:"operate"},ne=k(()=>e("span",{class:"name"}," Switch Wallet ",-1)),oe=k(()=>e("span",{class:"name"}," Sign Out ",-1)),se=k(()=>e("span",{class:"name"}," Connect Wallet ",-1)),ce=[se],le={id:"model"},ie={class:"chain"},re=["src","alt"],de={class:"chain_name"},ue=["onClick"],_e=["src","alt"],me={class:"wallet_name"},he=O({props:{autoload:{type:Boolean}},emits:["loaded"],setup(n,{emit:b}){const z=n;let g=v(""),l=v(""),i=v(!1);const r=G(),S=()=>i.value=!0,W=async s=>{try{g.value=s;const a=new H(s,K[s]);await a.login(),l.value=s,r.connect=a,localStorage.setItem("FLWS",s),a.onChainChanged(B),a.onAccountsChanged(L),i.value=!1,b("loaded")}catch({data:a,message:h}){Q.error({duration:4e3,content:"Error",meta:(a==null?void 0:a.message)||h})}finally{g.value=""}},B=async()=>{location.reload()},L=async s=>{const a={connect:{account:s},auth:{signature:""}};r.$patch(a)},N=()=>{S()},V=()=>{r.connect={},r.auth.signature=""};return(()=>{if(l.value=localStorage.getItem("FLWS")||"",z.autoload&&l.value)return W(l.value)})(),(s,a)=>{const h=f("n-icon"),$=f("n-popover"),j=f("n-spin"),F=f("n-modal");return c(),u(C,null,[e("div",Y,[t(r).connect.account?(c(),y($,{key:0,width:"trigger",placement:"bottom","show-arrow":!1,raw:!0},{trigger:_(()=>{var o,p;return[e("div",Z,[e("img",{src:(o=t(I)[t(l)])==null?void 0:o.mainnet,class:"mainnet"},null,8,ee),e("img",{src:(p=t(I)[t(l)])==null?void 0:p.icon,class:"icon"},null,8,ae),R(" "+w(t(X)(t(r).connect.account)),1)])]}),default:_(()=>[e("div",te,[e("div",{class:"item",onClick:N},[m(h,{size:"30"},{default:_(()=>[m(t(T))]),_:1}),ne]),e("div",{class:"item",onClick:V},[m(h,{size:"30"},{default:_(()=>[m(t(A))]),_:1}),oe])])]),_:1})):(c(),u("div",{key:1,class:"connecting",tabindex:"0",outline:"0",hidefocus:"true",onClick:S},ce))]),m(F,{show:t(i),"onUpdate:show":a[0]||(a[0]=o=>P(i)?i.value=o:i=o),"z-index":1e4},{default:_(()=>[e("div",le,[(c(!0),u(C,null,x(t(J),(o,p)=>(c(),u("div",{class:"blockchain",key:p},[e("div",ie,[e("img",{src:o.icon,alt:o.name,class:"chain_icon"},null,8,re),e("span",de,w(o.name),1)]),(c(!0),u(C,null,x(o.include,d=>(c(),u("div",{key:d.symbol,onClick:fe=>W(d.symbol),class:"wallet"},[e("img",{src:d.icon,alt:d.name,class:"wallet_icon"},null,8,_e),e("span",me,w(d.name),1),m(E,{mode:"out-in",name:"coin"},{default:_(()=>[t(g)===d.symbol?(c(),y(j,{key:0,size:20})):M("",!0)]),_:2},1024)],8,ue))),128))]))),128))])]),_:1},8,["show"])],64)}}});var we=U(he,[["__scopeId","data-v-498f104e"]]);export{we as C};
